# design.tex 理論まとめと現行システムとの差異分析

**作成日**: 2026-01-08
**目的**: 論文design.texの理論的基盤をまとめ、現行Deep Traceability Systemとの差異を明確化

---

## 1. 論文の構成と主要概念

### 1.1 序論（第1章）

#### 設計の定義
- 設計とは「何を達成したいのか」と「どのように達成したいのか」の相互作用（Nam Pyo Suh）
- 設計は正解のない世界に正解を探す行為であり、科学的原理と芸術的創造の両面を持つ

#### 設計の体系化手法
| 手法 | 提唱者 | 特徴 |
|-----|-------|------|
| 一般設計学 | 吉川 | 位相空間論による設計の形式的表現 |
| 公理論的設計 | Nam Pyo Suh | FR→DPの写像、独立公理と情報公理 |
| 工学設計 | Pahl & Beitz | 機能構造の階層性、設計プロセスの段階分け |

#### 今日の設計課題
1. **製品の複雑化**: 部品点数・ソフトウェア複雑さの増大
2. **「モノ」から「コト」へ**: サービス・体験設計の重要性
3. **知識伝達の課題**: 熟練者の暗黙知の継承問題
4. **設計とAI**: LLMによる暗黙知の表出化支援の可能性

### 1.2 設計プロセスの構造（第2章）

#### 発散と収束
- 設計プロセスは発散的思考（アイデア生成）と収束的思考（絞り込み）の繰り返し
- 全体として螺旋的構造を持つ

#### V字モデル
- 設計と検証の対応関係を表現
- 上流設計の重要性：初期段階での意思決定が全体コストに大きな影響

#### 循環的設計
- 問題と解の共進化（Co-evolution）- Maherモデル
- 設計者は問題空間と解決空間を行き来しながら両者を同時に洗練

#### 設計階層の不完全性命題
**重要な理論的貢献**:
> 設計知識K(t)が時間とともに単調増加するとき、完全性・一貫性・安定性を同時に満たす階層構造Hは構成不可能である

- 完全性：全ての設計課題が階層内で位置づけられること
- 一貫性：階層の各水準間で矛盾が生じないこと
- 安定性：適切な分解粒度が一意に定まること

→ **階層は設計者の認識枠組みとして位置づけるべき**

### 1.3 設計と評価（第3章）

#### 尺度水準の分類（Stevens）
| 尺度 | 特徴 | 可能な演算 |
|-----|------|----------|
| 名義尺度 | カテゴリ分類 | 等号・不等号 |
| 順序尺度 | 順序あり | 大小比較 |
| 間隔尺度 | 等間隔 | 加減算 |
| 比例尺度 | 絶対的ゼロ | 四則演算 |

**重要**: 正規化方法の選択が評価結果に決定的影響を与える

#### パレート分析
- パレート支配：全目的で劣らず、少なくとも1つで真に優れる
- パレートフロント：パレート最適解の集合
- 非凸パレートフロントでは加重和法で到達不可能な領域が存在

#### 多目的意思決定手法
| 手法 | 定式化 | 特徴 |
|-----|-------|------|
| 加重和法 | $\sum w_k f_k(x)$ | 簡潔だが非凸対応不可 |
| 効用関数法 | $U[f_1, ..., f_K]$ | 選好の明示的モデル化 |
| ユートピア点最近傍法 | $L_2$ノルム最小化 | 理想点からの距離 |
| グローバル基準法 | $L_p$ノルム一般化 | パラメータで調整可能 |
| Min-Max法 | 最大劣化度最小化 | 公平な妥協解 |

#### トレードオフの認識論的意義
- トレードオフと二律背反は異なる：トレードオフは技術革新により改善可能
- パレートフロントは固定的制約ではなく、移動可能

---

## 2. トレードオフ構造の数理的判定（第5章）- **核心理論**

### 2.1 既存研究の問題点
1. トレードオフの定義が曖昧
2. 数式の根拠が不明確
3. 問題設定のレベルずれ（設計困難度間のトレードオフを扱う「責任転嫁」）

### 2.2 パスモデルの導入

#### PAVE構造（設計ネットワークの階層）
| 層 | 名称 | 説明 |
|----|-----|------|
| P | Performance（性能） | 最終評価対象 |
| A | Attribute（属性） | 中間的特性 |
| V | Variable（変数） | 設計者が操作可能 |
| E | Entity（実体） | 物理的要素 |

#### 設計論的因果
- パス図における因果方向は設計文脈に依存
- 同一の物理法則（F=ma）でも、操作可能性によって因果方向が異なる
- 「真の因果」を主張するものではなく、設計者の認識モデル

### 2.3 総効果行列の導出

#### 構造方程式
```
A = B_AA × A + B_AV × V
P = B_PA × A
```

#### 総効果行列
```
T = B_PA × (I - B_AA)^(-1) × B_AV
```

- $B_{PA}$: 属性→性能への直接効果行列
- $B_{AA}$: 属性間の相互作用行列
- $B_{AV}$: 変数→属性への直接効果行列

#### Neumann級数展開
```
(I - B_AA)^(-1) = I + B_AA + B_AA² + B_AA³ + ...
```
- 直接効果と全ての間接効果を無限に足し合わせた「総効果」
- スペクトル半径 ρ(B_AA) < 1 で収束

### 2.4 構造的トレードオフ判定

#### 余弦類似度による判定
```
cos θ_ij = (T_i· · T_j·) / (||T_i·|| × ||T_j·||)
```

| cos θ | 解釈 |
|-------|------|
| > 0 | 協調関係（同時改善可能） |
| ≈ 0 | 独立関係 |
| < 0 | トレードオフ関係 |
| ≈ -1 | 強いトレードオフ（背反） |

#### 構造的トレードオフの特徴づけ（定理5.1）
> cos θ_ij < 0 であることと、トレードオフを満たす設計介入が存在することは同値

### 2.5 Shapley値による寄与分解

#### 問題：トレードオフの非加法性
- トレードオフ指標は個々の経路の寄与の単純和として分解できない
- 経路間の干渉項が存在

#### 解決：Shapley値
```
φ_k = Σ_{S⊆Z\{A_k}} [|S|!(|Z|-|S|-1)!/|Z|!] × [C_ij(S∪{A_k}) - C_ij(S)]
```

**特性**:
- 効率性：Σφ_k = C_ij（寄与の総和 = 全体の値）
- 対称性：同じ貢献なら同じ寄与
- ダミー：貢献ゼロなら寄与ゼロ
- 加法性：複数ゲームの和に対応

→ **「どの中間特性がトレードオフを引き起こしているか」を厳密に特定可能**

---

## 3. 離散値パス解析（第6章）

### 3.1 動機
- 概念設計段階では定量的モデルが存在しない
- 設計者は「強い影響」「中程度」などカテゴリカルな判断を行う
- 順序尺度のデータに四則演算を適用することの妥当性

### 3.2 離散化スキーム

#### 5段階均等分割（標準）
| 主観的判断 | 連続値範囲 | 代表値 |
|-----------|----------|-------|
| -3（強い負） | [-1.0, -0.6) | -0.8 |
| -1（弱い負） | [-0.6, -0.2) | -0.4 |
| 0（なし） | [-0.2, +0.2) | 0 |
| +1（弱い正） | [+0.2, +0.6) | +0.4 |
| +3（強い正） | [+0.6, +1.0] | +0.8 |

### 3.3 離散化誤差の特性
- 最大誤差：|ε| ≤ 1/n
- 期待値：E[ε] = 0（不偏性）
- 分散：Var[ε] = 1/(3n²)

### 3.4 保証される特性
1. **符号保存**: トレードオフの有無（cos θ の符号）が保存される条件
2. **順序保存**: トレードオフの相対的強度の順序が保存される条件

---

## 4. 現行システムとの差異分析

### 4.1 アーキテクチャの比較

| 項目 | 論文の提案 | 現行システム | 差異 |
|-----|-----------|------------|------|
| 階層構造 | PAVE（4層） | 4層ネットワーク | ほぼ同等（命名の違い） |
| 層の名称 | Performance/Attribute/Variable/Entity | Performance/Property/Variable/Object・Environment | 概念的に対応 |

### 4.2 トレードオフ分析の比較

| 項目 | 論文の提案 | 現行システム | 差異・改善可能性 |
|-----|-----------|------------|----------------|
| **トレードオフ判定** | 総効果行列の行ベクトル間cos θ | トレードオフ比率（競合パス数/総パス数） | **要改善**: 論文の手法はより理論的に厳密 |
| **間接効果の考慮** | Neumann級数で全経路を統合 | 共通特性経由のパスのみ | **要改善**: 多層の間接効果を考慮すべき |
| **寄与分解** | Shapley値 | なし | **新機能**: どの属性がトレードオフ原因かを特定 |

### 4.3 計算手法の比較

| 項目 | 論文の提案 | 現行システム | 差異 |
|-----|-----------|------------|------|
| エッジ重み | パス係数（連続値 or 離散値） | 5段階（-3,-1,0,+1,+3） | 同等 |
| 総効果計算 | T = B_PA(I-B_AA)^(-1)B_AV | 直接的なエッジ重みの積 | **要改善** |
| エネルギー計算 | 論文では言及なし | Match関数による計算 | 現行システム独自 |

### 4.4 評価・意思決定の比較

| 項目 | 論文の提案 | 現行システム | 差異 |
|-----|-----------|------------|------|
| 効用関数 | 単属性効用関数の合成 | 連続型/離散型の効用関数 | 同等 |
| 多属性効用 | 加法型/乗法型 | 加重和（票数×効用値） | 概念的に同等 |
| Min-Max法 | 重み付きチェビシェフ距離 | なし | **新機能候補** |

---

## 5. 現行システムへの改善提案

### 5.1 高優先度（理論的基盤の強化）

#### 1. 総効果行列の導入
```python
# 現行: 直接効果のみ
effect = weight_PA * weight_AV

# 提案: 間接効果を含む総効果
T = B_PA @ np.linalg.inv(I - B_AA) @ B_AV
```

#### 2. 構造的トレードオフ指標の実装
```python
def calc_tradeoff_index(T, i, j):
    """cos θ_ij を計算"""
    T_i = T[i, :]
    T_j = T[j, :]
    return np.dot(T_i, T_j) / (np.linalg.norm(T_i) * np.linalg.norm(T_j))
```

#### 3. トレードオフ行列の可視化
- 全性能ペアのcos θ値をヒートマップ表示
- 現行のトレードオフ比率に加えて、より精密な指標を提供

### 5.2 中優先度（分析機能の強化）

#### 4. Shapley値による寄与分解
- 「なぜこのトレードオフが発生しているか」を特定
- 介入すべき属性を明示的に提示
- 計算量はO(2^l)だが、属性数lが10以下なら実用的

#### 5. 離散化誤差の表示
- 5段階評価の理論的限界を可視化
- 判定の信頼度を表示

### 5.3 低優先度（拡張機能）

#### 6. Min-Max法の選択肢追加
- 現行の加重和に加えて、公平な妥協解を探索可能に

#### 7. パレートフロント可視化
- 2軸評価ビューの拡張として実装可能

---

## 6. 結論

### 論文の主要な理論的貢献
1. **設計階層の不完全性命題**: 完全な階層構造は原理的に構成不可能
2. **設計論的因果**: パス図は設計者の認識モデルであり、客観的因果ではない
3. **総効果行列による統合**: 直接効果と全間接効果を数学的に厳密に統合
4. **cos θによる構造的判定**: 介入方向に依存しないトレードオフ判定
5. **Shapley値による寄与分解**: トレードオフ原因の公平な配分
6. **離散化の理論的保証**: 概念設計段階での主観的判断の妥当性

### 現行システムへの示唆
- 現行システムは実用的に機能しているが、**トレードオフ分析の理論的基盤を強化**することで、より説得力のある設計支援が可能
- 特に**総効果行列**と**Shapley値**の導入が有効
- 論文の理論は現行システムの**拡張**として位置づけられ、既存機能との互換性を保ちつつ導入可能

---

## 参考文献（論文内で引用されているもの）

- Wright (1923, 1934): パス解析の基礎
- Pearl (2009): 構造因果モデル
- Shapley (1953): 協力ゲーム理論
- Miettinen (1998): 多目的最適化
- Keeney & Raiffa (1976): 多属性効用理論
